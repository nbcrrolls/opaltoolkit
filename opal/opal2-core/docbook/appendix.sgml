<appendix id="proxy-script" xreflabel="proxy-script">
<title>Script for Generating Proxy</title>

<para>
This sample script <filename>newcert.sh</filename> gets the 
certificate from the proxy. This is useful if the Opal job managers are
configured to use a proxy to submit jobs on behalf of the user.  Note
that the <command>-t 168</command> means that the certificate will be 
valid for 168 hours or 7 days.  The default certificate life time is
only 12 hours.
<screen>
#!/bin/bash

export GLOBUS_LOCATION=/opt/gt4
. $GLOBUS_LOCATION/etc/globus-user-env.sh
. $GLOBUS_LOCATION/globus-devel-env.sh

echo $password | $GLOBUS_LOCATION/bin/myproxy-logon -t 168 -s myproxy.teragrid.org -S &amp;&gt; logfile.log
echo running `date`&gt;&gt;logfile.log

cat logfile.log &gt;&gt; get_cert.log
</screen>
</para>

<para>
You may add the above script to crontab to run 
<filename>newcert.sh</filename> at the beginning
of every hour.
<screen>
0 * * * * $path_to_newcert_sh
</screen>
</para>

</appendix>


